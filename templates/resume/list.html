{% extends 'base.html' %}
{% block title %}
{% if category %}{{ category.name }}{% else %}æœ€æ–°æ–‡ç« {% endif %}
{% endblock %}
{% load static %}

{% block content %}
<div class="layui-container">
    <div class="layui-row layui-col-space20">
        <!-- å·¦ä¾§æ–‡ç« åˆ—è¡¨ -->
        <div class="layui-col-md9">
            {% for art in page_obj %}
            <a href="{% url 'resume:article_detail' art.pk %}" style="text-decoration:none;">
                <div class="layui-card" style="margin-bottom:15px;transition:.3s;cursor:pointer;"
                    onMouseOver="this.style.boxShadow='0 4px 12px rgba(0,0,0,.1)'" onMouseOut="this.style.boxShadow=''">
                    <div class="layui-card-body" style="padding:15px 20px;">
                        <h3 style="margin:0 0 8px;font-size:18px;font-weight:bold;">
                            <span style="color:#333;text-decoration:none;"
                                onMouseOver="this.style.color='#1E9FFF';this.style.textDecoration='underline'"
                                onMouseOut="this.style.color='#333';this.style.textDecoration='none'">
                                {{ art.title }}
                            </span>
                        </h3>
                        <div style="font-size:12px;color:#999;">
                            <span class="layui-badge layui-bg-blue">{{ art.category.name }}</span>
                            <span style="margin-left:15px;"><i class="layui-icon layui-icon-date"></i> {{ art.created_at|date:'Y-m-d' }}</span>
                            <span style="margin-left:15px;"><i class="layui-icon layui-icon-fire"></i> {{ art.views }} æ¬¡é˜…è¯»</span>
                        </div>
                        {% if art.summary %}
                        <p style="margin:8px 0 0;color:#666;font-size:14px;line-height:1.6;height:2.4em;overflow:hidden;">
                            {{ art.summary|truncatechars:100 }}
                        </p>
                        {% endif %}
                    </div>
                </div>
            </a>
            {% empty %}
            <p>æš‚æ— æ–‡ç« </p>
            {% endfor %}

            <!-- åˆ†é¡µ -->
            <div class="layui-box layui-laypage">
                {% if page_obj.has_previous %}
                <a href="?page={{ page_obj.previous_page_number }}" class="layui-laypage-prev">ä¸Šä¸€é¡µ</a>
                {% endif %}
                {% for num in page_obj.paginator.page_range %}
                {% if num == page_obj.number %}
                <span class="layui-laypage-curr"><em class="layui-laypage-em"></em><em>{{ num }}</em></span>
                {% else %}
                <a href="?page={{ num }}">{{ num }}</a>
                {% endif %}
                {% endfor %}
                {% if page_obj.has_next %}
                <a href="?page={{ page_obj.next_page_number }}" class="layui-laypage-next">ä¸‹ä¸€é¡µ</a>
                {% endif %}
            </div>
        </div>

        <!-- å³ä¾§è¾¹æ  -->
        <div class="layui-col-md3">
            <!-- æ–‡ç« åˆ†ç±» -->
            <div class="layui-card">
                <div class="layui-card-header">
                    <i class="layui-icon layui-icon-list"></i> æ–‡ç« åˆ†ç±»
                </div>
                <div class="layui-card-body" style="padding:10px;">
                    <div class="layui-row layui-col-space5">
                        {% for c in categories %}
                        <div class="layui-col-xs4 layui-col-sm4 layui-col-md12" style="margin-bottom:5px;">
                            <a href="{% url 'resume:category' c.slug %}"
                                class="layui-btn {% if category.slug == c.slug %}layui-btn-normal{% else %}layui-btn-primary{% endif %} layui-btn-fluid layui-btn-sm">
                                {{ c.name }}
                            </a>
                        </div>
                        {% endfor %}
                    </div>
                </div>
            </div>

            <!-- æ–¹å½¢æ—¥å† - ä»Šæ—¥ä¿¡æ¯ -->
            <div class="layui-card">
                <div class="layui-card-header">
                    <i class="layui-icon layui-icon-date"></i> ä»Šæ—¥
                </div>
                <div class="layui-card-body" style="padding:10px;text-align:center;">
                    <div id="todayCal"></div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<!-- ğŸ”¥ ä¸è¦å†æ¬¡å¼•å…¥ layui.jsï¼Œç›´æ¥ä½¿ç”¨ -->
<script>
    layui.use('laydate', function (laydate) {
        laydate.render({
            elem: '#todayCal',
            type: 'date',
            value: new Date(),
            position: 'static',
            showBottom: false,
            done: function (value, date) { /* ç‚¹å‡»æ—¥æœŸå¯è·³è½¬ï¼ˆå¯é€‰ï¼‰ */ }
        });
    });
</script>
{% endblock %}